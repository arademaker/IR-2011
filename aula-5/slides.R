###################################################
### chunk number 1: 
###################################################
library(zoo)
options(width=50)
options(continue=" ")


###################################################
### chunk number 2: 
###################################################
idades <- cut(sample(1:70, 30), c(1,15,24,60,70), 
              c("crianÃ§a","adolescente","adulto", "idoso"))
sexo <- factor(sample(1:2, 30, replace=TRUE), 
               levels = c(1,2), labels = c("F","M"))
t <- table(idades, sexo)


###################################################
### chunk number 3: 
###################################################
t


###################################################
### chunk number 4:  eval=FALSE
###################################################
## attributes(t)
## mode(t)
## class(t)


###################################################
### chunk number 5: 
###################################################
margin.table(t, 1)
prop.table(t)


###################################################
### chunk number 6: 
###################################################
addmargins(t, margin=c(1,2), FUN=mean, quiet=TRUE)


###################################################
### chunk number 7: 
###################################################
gl(2, 5, labels = c("nao", "sim"))


###################################################
### chunk number 8: 
###################################################
rnorm(10, mean = 10, sd = 3)


###################################################
### chunk number 9: 
###################################################
(m1 <- matrix(c(45, 23, 66, 77, 33, 44), 2, 3))
(m2 <- matrix(c(5, 3, 466, 54.5, 3.2, -34), 3, 2))


###################################################
### chunk number 10: 
###################################################
m1 %*% m2


###################################################
### chunk number 11: 
###################################################
t(m1)


###################################################
### chunk number 12: 
###################################################
(hoje <- Sys.Date())
format(hoje, "%d %b %Y")
seq(hoje, len = 10, by = "1 week")
c(months(hoje), weekdays(hoje))


###################################################
### chunk number 13: 
###################################################
as.Date("2011-01-26") - as.Date("2010-04-02")
ISOdate(2001, 1, 1) - ISOdate(2000, 6, 14)
table(cut(seq(ISOdate(2011, 1, 1), to = ISOdate(2011, 12, 31), by = "day"), "month"))


###################################################
### chunk number 14: 
###################################################
as.POSIXlt(Sys.time(), "GMT")
a <- as.POSIXct("2011-01-26 11:00") 
b <- as.POSIXct("2011-01-01 00:00")
a - b
format(Sys.time(), "%a %b %d %X %Y %Z")


###################################################
### chunk number 15: 
###################################################
x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
strptime(x, "%d%b%Y")

dates <- c("02/27/92", "02/27/92", "01/14/92")
times <- c("23:03:20", "22:29:56", "01:03:30")
x <- paste(dates, times)
strptime(x, "%m/%d/%y %H:%M:%S")


###################################################
### chunk number 16: 
###################################################
ts(rnorm(10), start = 1990, frequency = 1)


###################################################
### chunk number 17: 
###################################################
(k <- ts(rnorm(10), frequency = 12, start = c(1959, 2)))


###################################################
### chunk number 18: 
###################################################
(m <- ts(matrix(rnorm(30), 10, 3), start = c(1961, 6), frequency = 12))


###################################################
### chunk number 19: 
###################################################
plot(k)


###################################################
### chunk number 20: 
###################################################
plot(m)


###################################################
### chunk number 21: 
###################################################
plot(m, plot.type = "single", col = 1:3)


###################################################
### chunk number 22: 
###################################################
a <- ts(rnorm(10), frequency = 4, start = c(1959, 2))
b <- ts(rnorm(10), frequency = 4, start = c(1960, 1))
cbind(a,b)


###################################################
### chunk number 23: 
###################################################
x <- zoo(rnorm(5), seq(as.Date("2011-01-01"), length = 5, by = "days"))
y <- zoo(rnorm(5), seq(as.Date("2011-01-04"), length = 5, by = "days"))
cbind(x,y)


###################################################
### chunk number 24: 
###################################################
merge(x, y, all=FALSE)


###################################################
### chunk number 25: 
###################################################
Sq1 <- read.table(file = "squid1.txt", header = TRUE, stringsAsFactors=FALSE)
head(Sq1)


###################################################
### chunk number 26: 
###################################################
Sq2 <- read.table(file = "squid2.txt", header = TRUE, stringsAsFactors=FALSE)
head(Sq2)


###################################################
### chunk number 27: 
###################################################
dim(Sq1)
dim(Sq2)
unique(c(Sq1$Sample[-1],Sq1$Sample[length(Sq1$Sample)]) - Sq1$Sample)
unique(c(Sq2$Sample[-1],Sq2$Sample[length(Sq2$Sample)]) - Sq2$Sample)


###################################################
### chunk number 28: 
###################################################
SquidMerged <- merge(Sq1, Sq2, by = "Sample")
head(SquidMerged)


###################################################
### chunk number 29: 
###################################################
SquidMerged <- merge(Sq1, Sq2, by = "Sample", all= TRUE)
SquidMerged[1:10,]


###################################################
### chunk number 30: 
###################################################
x <- 35
cat("x tem o valor de ", x, "\t Estranho?\n")


###################################################
### chunk number 31:  eval=FALSE
###################################################
## scan()
## scan(4)
## scan(what=character())


###################################################
### chunk number 32: 
###################################################
x <- 3
if( x > 2) y <- 2*x else y <- 3*x
if( x > 2) {
  y <- 2*x
} else { 
  y <- 3*x
}


###################################################
### chunk number 33: 
###################################################
x <- rnorm(5, sd = 10)
ifelse(x < 0, "-", "+")


###################################################
### chunk number 34: 
###################################################
vs <- rnorm(10)
switch(1, mean(vs), median(vs), sum(vs))
semaforo <- "verde"
switch(semaforo, verde = "continua", amarelo = "acelera", vermelho = "para")


###################################################
### chunk number 35: 
###################################################
Fibonacci <- numeric(12)
Fibonacci[1] <- Fibonacci[2] <- 1
for(i in 3:12) Fibonacci[i] <- Fibonacci[i - 2] + Fibonacci[i - 1]
Fibonacci


###################################################
### chunk number 36: 
###################################################
x <- rnorm(10)
k <- 0
for(v in x){
  if (v > 0) 
    y <- v
  else 
    y <- 0
  k <- k + y
}
k


###################################################
### chunk number 37: 
###################################################
k <- sum(x[x > 0])


###################################################
### chunk number 38: 
###################################################
Fib1 <- 1
Fib2 <- 1
Fibonacci <- c(Fib1, Fib2)
while (Fib2 < 100) {
  Fibonacci <- c(Fibonacci, Fib2)
  oldFib2 <- Fib2
  Fib2 <- Fib1 + Fib2
  Fib1 <- oldFib2
}
Fibonacci


###################################################
### chunk number 39:  eval=FALSE
###################################################
## texto <- c() 
## repeat {
##   cat('Introduza uma frase ? (frase vazia termina) ') 
##   fr <- readLines(n=1) 
##   if (fr == '') break else texto <- c(texto,fr)
## }


###################################################
### chunk number 40:  eval=FALSE
###################################################
## repeat { 
##   cat('Introduza um nro positivo ? (zero termina) ') 
##   nro <- scan(n=1) 
##   if (nro < 0) next 
##   if (nro == 0) break 
##   pos <- c(pos,nro)
## }


###################################################
### chunk number 41: 
###################################################
hipotenusa <- function(a, b) {
  h <- sqrt(a^2 + b^2)
  h
}
hipotenusa(4, 3)
hipotenusa(c(4,5,6), c(3,4,5))


###################################################
### chunk number 42: 
###################################################
(function(x) {y <- 10; x*y})(10)


###################################################
### chunk number 43: 
###################################################
fx <- function(a, b = 10) sqrt(a^2 + b^2)
fx(12)
fx <- function(a, b = 10) c(a,b,sqrt(a^2 + b^2))
fx(10)
fx(b = 1, a=12)


###################################################
### chunk number 44: 
###################################################
x <- 5
f <- function() {
  x <- 6
  x
}
f()
x


###################################################
### chunk number 45: 
###################################################
x <- 5
f <- function() print(x)
f()
rm(x)


###################################################
### chunk number 46: 
###################################################
f1 <- function(a1, a2 = sqrt(a1)) {
  a1 <- a1^2
  a2
}
f1(4)


###################################################
### chunk number 47: 
###################################################
f2 <- function(a1, a2 = sqrt(a1)) {
  z <- a2/a1
  a1 <- a1^2
  a2
}
f2(4)


###################################################
### chunk number 49: 
###################################################
args(quadratic)
quadratic(1, -5, 6)


###################################################
### chunk number 50: 
###################################################
quadratic(1, c(-5, 1), 6)


###################################################
### chunk number 51: 
###################################################
quadratic


